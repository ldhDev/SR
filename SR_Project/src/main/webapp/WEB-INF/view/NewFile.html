<%@ page language="java" contentType="text/html; charset=EUC-KR"

    pageEncoding="EUC-KR"%>

<!DOCTYPE html>

<html>

<head>

<meta charset="EUC-KR">

<title>Insert title here</title>

 

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> 

<script type="text/javascript">

$(document).ready(function(){ 
	lat = null;
	lon = null;
	
	navigator.geolocation.getCurrentPosition(function(position) {
		  //do_something(position.coords.latitude, position.coords.longitude);
		  lat = position.coords.latitude;
		  lon = position.coords.longitude;
		  
		// de,lo고척근린공원 고척도서관 앞','구로구','서울특별시 구로구 고척로45길 31구로구 고척동 산 9-14',10,'37.505135','126.852760');

			var apiURI = "http://api.openweathermap.org/data/2.5/weather?lat="+lat+"&lon="+lon+"&appid=c0ebe0d171c3c649371ea1781fb397ce";
			//var apiURI = "http://api.openweathermap.org/data/2.5/weather?lat=37.477885&lon=126.878985&appid=c0ebe0d171c3c649371ea1781fb397ce";

		    $.ajax({

		        url: apiURI,
		        dataType: "json",
		        type: "GET",
		        async: "false",
		        success: function(resp) {
		            console.log(resp);
		            console.log("현재온도 : "+ (resp.main.temp- 273.15) );
		            $("#asd").html("현재온도 : "+ (resp.main.temp- 273.15) );
		            console.log("현재습도 : "+ resp.main.humidity);
		            console.log("날씨 : "+ resp.weather[0].main );
		            $("#asd").append("날씨 : "+ resp.weather[0].main );
		            console.log("상세날씨설명 : "+ resp.weather[0].description );
		            $("#asd").append("상세날씨설명 : "+ resp.weather[0].description  );
		            console.log("날씨 이미지 : "+ resp.weather[0].icon );
		            console.log("바람   : "+ resp.wind.speed );
		            $("#asd").append("바람   : "+ resp.wind.speed );
		            console.log("나라   : "+ resp.sys.country );
		            console.log("도시이름  : "+ resp.name );
		            $("#asd").append("도시이름  : "+ resp.name );
		            console.log("구름  : "+ (resp.clouds.all) +"%" );      
		            
		            var imgURL = "http://openweathermap.org/img/w/" + resp.weather[0].icon + ".png";
		            $("#dsa").html("<img src='"+imgURL+"'>");

		        } //석세스
		    })//에이잭스
		//////////////////////////////////////////////////////////AJAX
		
		
		});//바로 위에거
	
	if(lat == null || lon == null){
		lat = "35.6894875";
		lon = "139.6917064";
		
		// de,lo고척근린공원 고척도서관 앞','구로구','서울특별시 구로구 고척로45길 31구로구 고척동 산 9-14',10,'37.505135','126.852760');

		var apiURI = "http://api.openweathermap.org/data/2.5/weather?lat="+lat+"&lon="+lon+"&appid=c0ebe0d171c3c649371ea1781fb397ce";
		//var apiURI = "http://api.openweathermap.org/data/2.5/weather?lat=37.477885&lon=126.878985&appid=c0ebe0d171c3c649371ea1781fb397ce";

	    $.ajax({

	        url: apiURI,
	        dataType: "json",
	        type: "GET",
	        async: "false",
	        success: function(resp) {
	            console.log(resp);
	            console.log("현재온도 : "+ (resp.main.temp- 273.15) );
	            $("#asd").html("현재온도 : "+ (resp.main.temp- 273.15) );
	            console.log("현재습도 : "+ resp.main.humidity);
	            console.log("날씨 : "+ resp.weather[0].main );
	            $("#asd").append("날씨 : "+ resp.weather[0].main );
	            console.log("상세날씨설명 : "+ resp.weather[0].description );
	            $("#asd").append("상세날씨설명 : "+ resp.weather[0].description  );
	            console.log("날씨 이미지 : "+ resp.weather[0].icon );
	            console.log("바람   : "+ resp.wind.speed );
	            $("#asd").append("바람   : "+ resp.wind.speed );
	            console.log("나라   : "+ resp.sys.country );
	            console.log("도시이름  : "+ resp.name );
	            $("#asd").append("도시이름  : "+ resp.name );
	            console.log("구름  : "+ (resp.clouds.all) +"%" );      
	            
	            var imgURL = "http://openweathermap.org/img/w/" + resp.weather[0].icon + ".png";
	            $("#dsa").html("<img src='"+imgURL+"'>");

	        } //석세스
	    })//에이잭스
	//////////////////////////////////////////////////////////AJAX
	}	
	//function do_something(lat,lon){
	//}//섬띵
	
	
	


});

</script>

 

 

</head>

<body>

<h2>asd</h2>

<div id="asd">
</div>
<div id="dsa">
</div>

</body>

</html>